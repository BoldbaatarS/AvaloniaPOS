<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:RestaurantPOS.Controls"
             x:Class="RestaurantPOS.Controls.PasswordTextBox"
             x:DataType="local:PasswordTextBox">
    <Grid>
        <!-- Нэг TextBox: бодит эсвэл маск -->
        <TextBox Padding="0,0,30,0" 
                 TextAlignment="Center"
                 VerticalContentAlignment="Center">
            <TextBox.Text>
                <MultiBinding Converter="{StaticResource MaskedTextConverter}">
                    <Binding Path="Text" Mode="TwoWay" RelativeSource="{RelativeSource AncestorType=local:PasswordTextBox}"/>
                    <Binding Path="IsPasswordVisible" RelativeSource="{RelativeSource AncestorType=local:PasswordTextBox}"/>
                </MultiBinding>
                
            </TextBox.Text>
            <TextBox.Styles>
                    <Style Selector="Button#PART_ClearButton">
                        <Setter Property="Opacity" Value="1"/>
                    </Style>
            </TextBox.Styles>
        </TextBox>

        <!-- Eye icon - Тогтмол харагдах болгож засварласан -->
        <Button Width="24" Height="24"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Margin="0,0,5,0"
                Background="Transparent"
                BorderBrush="Transparent"
                Click="ToggleVisibility_Click"
                IsVisible="True"
                Opacity="1.0"> <!-- Opacity нэмж, харагдах байдлыг баталгаажуул -->
            <PathIcon Data="{Binding IsPasswordVisible, Converter={StaticResource EyeIconConverter}, RelativeSource={RelativeSource AncestorType=local:PasswordTextBox}}"/>
        </Button>
    </Grid>
</UserControl>